<%- include('../Partials/header'); -%> 
<%- include('../Partials/main_nav'); -%> 
<main class="container my-5"> <!--creates a main container with margin-y of 5 for spacing-->
    <div class="row"> 
        <div class="col-md-12"> <!--creates a column that spans the full width on medium and larger screens-->

            <!-- Title -->
            <h1 class="text-center display-4 mb-3" style="color: #1a73e8;"><%= title %></h1>
            <br>
            <% if (typeof displayName == 'string' && displayName) { %> 
            <!-- Create Button Aligned Left Under Title --> 
            <div class="mb-3"> <!--container with margin-bottom for spacing-->
                <a href="/workoutlist/add" class="btn btn-success btn-sm" role="button" style="border-radius: 8px;"> <!--link styled as a small green button, leading to the add workout page-->
                    <i class="fas fa-plus-circle"></i> Create Workout Tracker <!--button text with an icon for creating a new workout entry-->
                </a>
            </div>
            <% } %>
            <!-- Workout List Table --> <!--indicates the start of the table section for displaying workout entries-->
            <table class="table table-bordered table-striped table-hover" style="box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);"> <!--creates a styled table with borders, striped rows, hover effect, and shadow-->
                <thead class="bg-primary text-white"> <!--defines the table header with blue background and white text-->
                    <tr class="d-flex"> <!--creates a flexible table row-->
                        <th class="text-center col-1">Name</th> <!--table header for name, centered and with column width of 1-->
                        <th class="text-center col-2">Workout Type</th> <!--table header for workout type, with column width of 2-->
                        <th class="text-center col-4">Exercise Details</th> <!--table header for exercise details, with column width of 4-->
                        <th class="text-center col-1">Duration</th> <!--table header for duration, with column width of 1-->
                        <th class="text-center col-2">Performance Rating</th> <!--table header for performance rating, with column width of 2-->
                        <% if (typeof displayName == 'string' && displayName) { %>
                        <th class="text-center col-2">Actions</th> <!--table header for actions, with column width of 2-->
                        <% } %>
                    </tr>
                </thead>
                <tbody> <!--starts the table body where workout entries will be listed-->
                    <% for(let count = 0; count < WorkoutList.length; count++) { %> <!--iterates through each workout in WorkoutList-->
                    <tr class="d-flex" style="background-color: #f9f9f9;"> <!--creates a flexible table row with light grey background-->
                        <td class="text-center col-1" style="font-weight: bold; color: #007bff;"><%= WorkoutList[count].Name %></td> <!--displays the workout name in bold blue text-->
                        <td class="text-center col-2" style="color: #6c757d;"><%= WorkoutList[count].WorkoutType %></td> <!--displays the workout type in grey text-->
                        <td class="text-center col-4" style="color: #6c757d;"><%= WorkoutList[count].ExerciseDetails %></td> <!--displays the exercise details in grey text-->
                        <td class="text-center col-1" style="font-weight: bold;"><%= WorkoutList[count].Duration %> min</td> <!--displays the duration in bold text with "min" suffix-->
                        <td class="text-center col-2"> <!--container for the performance rating badge-->
                            <span class="badge bg-info text-dark" style="font-size: 1em; padding: 5px 10px;"> <!--styled badge with blue background and dark text-->
                                <%= WorkoutList[count].PerformanceRating %>/10 <!--displays the performance rating out of 10-->
                            </span>
                        </td>
                        <% if (typeof displayName == 'string' && displayName) { %> <!--actions Section for logged-in users -->
                        <td class="text-center col-2"> <!--container for action buttons-->
                            <a href="/workoutlist/edit/<%= WorkoutList[count]._id %>" class="btn btn-outline-primary btn-sm mx-1" style="border-radius: 5px;"> <!--link styled as a small blue outline button for editing the workout-->
                                <i class="fas fa-pencil-alt"></i> Edit <!--button text with an edit icon-->
                            </a>
                            <a href="/workoutlist/delete/<%= WorkoutList[count]._id %>" class="btn btn-outline-danger btn-sm mx-1" onclick="return confirmDelete()" style="border-radius: 5px;"> <!--link styled as a small red outline button for deleting the workout-->
                                <i class="fas fa-trash-alt"></i> Delete <!--button text with a delete icon-->
                            </a>
                        </td>
                        <% } %>
                    </tr>
                    <% } %> 
                </tbody>
            </table>
        </div>
    </div>
</main>

<!-- Delete Confirmation Script --> 
<script>
    function confirmDelete() { <!--defines a function to confirm deletion-->
        return confirm("Are you sure you want to delete this workout entry?"); //prompts the user with a confirmation message
    }
</script>
<%- include('../Partials/footer'); -%> 
